{"version":3,"sources":["webpack:///./app/constants/index.tsx","webpack:///./app/utils/index.ts","webpack:///./app/components/Map/index.tsx","webpack:///./index.tsx","webpack:///./app/index.tsx","webpack:///./app/usgs_logo.png","webpack:///./app/components/Map/style.css?e28f","webpack:///./app/style.css?0bee"],"names":["Statistics","ActionTypes","endPoint","mapboxLayer","getMagnitudes","magnitudes","index","magnitude","key","toString","value","text","push","getDate","date","month","getUTCMonth","day","getUTCDate","getUTCFullYear","accessToken","mapReducer","state","action","type","open","startDate","payload","endDate","limit","Error","Map","props","mapboxElRef","mapState","setMap","data","setData","dpStartDate","setDpStartDate","dpEndDate","setDpEndDate","dispatch","fetchData","url","a","get","then","res","features","catch","error","addLayerAndEvents","map","addSource","generateId","addLayer","popup","Popup","closeButton","closeOnClick","mapIsLoaded","lastId","on","e","properties","geometry","id","getCanvas","style","cursor","mag","place","time","coordinates","slice","HTML","Date","toDateString","toLocaleTimeString","Math","abs","lngLat","lng","setLngLat","setHTML","addTo","remove","dropdownValue","setDropdownValue","length","removeLayer","removeSource","container","current","center","zoom","addControl","NavigationControl","once","constructMap","Modal","size","onClose","Header","Content","selected","onChange","Input","min","max","placeholder","currentTarget","Actions","Button","negative","onClick","positive","concat","className","Dropdown","event","dropdownData","setFilter","start","range","i","buildRange","fluid","search","selection","options","animated","primary","hidden","visible","Icon","name","ref","isLoading","setIsLoading","Image","src","document","getElementById","module","exports"],"mappings":"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","file":"app.88ce35f071358815955c.js","sourcesContent":["import { Models } from 'app/models';\nimport { DropdownItemProps } from 'semantic-ui-react';\n\nexport const assetsPath: string =  '../../assets';\nexport interface Icon { [key: string]: JSX.Element; }\n\nexport const endPoint: Models.EndPoint = {\n\turl: 'https://earthquake.usgs.gov/earthquakes/feed/v1.0/summary/all_month.geojson',\n\tsignificantByWeek: 'https://robincanlas-server-typescript-docker.onrender.com/earthquake/all/significant/significantByWeek',\n\tsignificantByMonth: 'https://robincanlas-server-typescript-docker.onrender.com/earthquake/all/significant/significantByMonth',\n\tbyRangeWith: 'https://robincanlas-server-typescript-docker.onrender.com/earthquake/byRange/',\n};\nexport const mapboxToken: string = 'pk.eyJ1IjoicnVrYmluMDExIiwiYSI6ImNrYWdrbDI3bTA5NzgyeHBuaWkzbWIxeDQifQ.C7KY2elb_bs0qrST3HvSSQ';\nexport const mapboxStyle: string = 'mapbox://styles/rukbin011/ckc8or1203fi81irsp4poh1hv';\nexport const mapboxLayer: mapboxgl.Layer = {\n\t'id': 'earthquake-layer',\n\t'type': 'circle',\n\t'source': 'points',\n\t'paint': {\n\t\t'circle-opacity': 0.5,\n\t\t'circle-stroke-width': 0.5,\n\t\t'circle-color': [\n\t\t\t'interpolate',\n\t\t\t['linear'],\n\t\t\t['get', 'mag'],\n\t\t\t// https://colorbrewer2.org/#type=sequential&scheme=YlOrRd&n=9 color palette\n\t\t\t1, '#ffffcc',\n\t\t\t2, '#ffeda0',\n\t\t\t3, '#fed976',\n\t\t\t4, '#feb24c',\n\t\t\t5, '#fd8d3c',\n\t\t\t6, '#fc4e2a',\n\t\t\t7, '#e31a1c',\n\t\t\t8, '#bd0026',\n\t\t\t9, '#b10026',\n\t\t\t10, '#b10026',\n\t\t],\n\t\t'circle-radius': [\n\t\t\t'interpolate',\n\t\t\t['linear'],\n\t\t\t['get', 'mag'],\n\t\t\t0, 2,\n\t\t\t1, 4,\n\t\t\t2, 8,\n\t\t\t3, 12,\n\t\t\t4, 16,\n\t\t\t5, 20,\n\t\t\t6, 30,\n\t\t\t7, 45,\n\t\t\t8, 65,\n\t\t\t9, 75,\n\t\t\t10, 100\n\t\t]\n\t}\n};\n\nexport const getMagnitudes = (): DropdownItemProps[] => {\n\tconst magnitudes: DropdownItemProps[] = [];\n\tfor (let index = 1; index <= 10; index++) {\n\t\tconst magnitude = { key: index.toString(), value: index.toString(), text: `Magnitude ${index.toString()}+` };\n\t\tmagnitudes.push(magnitude);\n\t}\n\treturn magnitudes;\n};\n\nexport enum Statistics {\n\tCONFIRMED = 'confirmed',\n\tRECOVERED = 'recovered',\n\tDEATHS = 'deaths'\n}\n\nexport enum ActionTypes {\n\tGET_STATISTICS_REQUEST = 'GET_STATISTICS_REQUEST',\n\tGET_STATISTICS_SUCCESS = 'GET_STATISTICS_SUCCESS',\n\tGET_STATISTICS_FAILED = 'GET_STATISTICS_FAILED',\n\n\tSET_GLOBAL_STATISTICS = 'SET_GLOBAL_STATISTICS',\n\tSET_COUNTRY_STATISTICS = 'SET_COUNTRY_STATISTICS',\n\n\tGET_COUNTRIES_REQUEST = 'GET_COUNTRIES_REQUEST',\n\tGET_COUNTRIES_SUCCESS = 'GET_COUNTRIES_SUCCESS',\n\tGET_COUNTRIES_FAILED = 'GET_COUNTRIES_FAILED',\n\n\tGET_DAILY_REQUEST = 'GET_DAILY_REQUEST',\n\tGET_DAILY_SUCCESS = 'GET_DAILY_SUCCESS',\n\tGET_DAILY_FAILED = 'GET_DAILY_FAILED'\n}","// import { createBrowserHistory } from 'history';\n\nexport function omit<T extends object, K extends keyof T>(target: T, ...omitKeys: K[]): Omit<T, K> {\n\treturn (Object.keys(target) as K[]).reduce(\n\t\t(res, key) => {\n\t\t\tif (!omitKeys.includes(key)) {\n\t\t\t\tres[key] = target[key];\n\t\t\t}\n\t\t\treturn res;\n\t\t},\n\t\t{} as any\n\t);\n}\n\n// export const history = createBrowserHistory({\n// \tbasename: process.env.PUBLIC_URL\n// });\n\nexport const getDate = (date: Date): string => {\n  const month = date.getUTCMonth() + 1; //months from 1-12\n  const day = date.getUTCDate();\n  const year = date.getUTCFullYear();\n\n  return year + \"-\" + month + \"-\" + day;\n};","import * as React from 'react';\nimport * as style from './style.css';\nimport mapboxgl, { LngLatLike } from 'mapbox-gl';\nimport axios from 'axios';\nimport { endPoint, mapboxToken, mapboxStyle, mapboxLayer, getMagnitudes } from 'app/constants';\nimport { Button, Dropdown, DropdownProps, Icon, Input, Modal } from 'semantic-ui-react';\nimport DatePicker from \"react-datepicker\";\nimport { getDate } from 'app/utils';\n\n// Mapbox css - needed to make tooltips work later in this article\n// import 'mapbox-gl/dist/mapbox-gl.css';\n\nmapboxgl.accessToken = mapboxToken;\n\nexport namespace Map {\n\texport interface Props {\n\t\tmapIsLoaded: () => void;\n\t}\n\n  export interface ModalState {\n    open?: boolean;\n    startDate?: string;\n    endDate?: string;\n    limit?: string | null;\n  }\n  \n  export interface IssuesAction {\n    type: string;\n    payload?: Map.ModalState;\n  }\n}\n \n\nconst mapReducer: React.Reducer<Map.ModalState, Map.IssuesAction> = (state, action) => {\n  switch (action.type) {\n    case 'close':\n      return { ...state, open: false }\n    case 'open':\n      return { ...state, open: true }\n    case 'setStartDate':\n      return { ...state, startDate: action.payload?.startDate }\n    case 'setEndDate':\n      return { ...state, endDate: action.payload?.endDate }\n    case 'setLimit':\n      return { ...state, limit: action.payload?.limit }\n    default:\n      throw new Error('Unsupported action...')\n  }\n}\n\nexport const Map: React.FC<Map.Props> = (props: Map.Props) => {\n\tconst mapboxElRef = React.useRef(null); // DOM element to render map\n\tconst [mapState, setMap] = React.useState<mapboxgl.Map | null>(null);\n\tconst [data, setData] = React.useState<any>([]);\n  const [dpStartDate, setDpStartDate] = React.useState(new Date());\n  const [dpEndDate, setDpEndDate] = React.useState(new Date());\n\n  const [state, dispatch] = React.useReducer(mapReducer, {\n    open: false,\n    startDate: getDate(new Date()),\n    endDate: getDate(new Date()),\n    limit: null\n  });\n\n  const { open, startDate, endDate, limit } = state;\n\n\tconst fetchData = (url: string) => {\n\t\taxios.get(url)\n\t\t.then((res: any) => {\n\t\t\tsetData(res.data.features);\n\t\t})\n\t\t.catch((error: any) => {\n\t\t\tthrow new Error(error);\n\t\t});\n\t};\n\n\tReact.useEffect(() => {\n\t\tfetchData(endPoint.significantByMonth);\n\t}, []);\n\t\n  const clearLayer = (map: mapboxgl.Map) => {\n    map.removeLayer(mapboxLayer.id);\n    map.removeSource('points');\n  };\n\n  const addLayerAndEvents = (map: mapboxgl.Map) => {\n     // Add our SOURCE\n    // with id 'points'\n    map.addSource('points', {\n      type: 'geojson',\n      generateId: true,\n      data: {\n        type: 'FeatureCollection',\n        // features: data as Feature<Geometry, GeoJsonProperties>[]\n        features: data as any // change later\n      }\n    });\n\n    // Add the circle layers\n    map.addLayer(mapboxLayer);\n    \n    // Create a mapbox popup\n    const popup = new mapboxgl.Popup({\n      closeButton: false,\n      closeOnClick: false\n    });\n\n    setMap(map as any);\n    props.mapIsLoaded();\n\n    // Variable to hold the active country/province on hover\n    let lastId: number | null = null;\n\n    // Mouse move event\n    map.on('mousemove', 'earthquake-layer', e => {\n      if (e.features && e.features[0].properties && e.features[0].geometry.type === 'Point') {\n        // Get the id from the properties\n        const id = e.features[0].id as number;\n        // Only if the id are different we process the tooltip\n        if (id !== lastId) {\n          lastId = id;\n          // map.setPaintProperty(\n          // \t'Outline', \n          // \t'circle-radius', \n          // \t['match', ['get', id.toString()], id.toString(), 100, 0]\n          // );\n          // map.setPaintProperty(\n          // \t'Outline', \n          // \t'circle-opacity', \n          // \t['match', ['get', id.toString()], id.toString(), 1, 0]\n          // );\n          // Change the pointer type on move move\n          map.getCanvas().style.cursor = 'pointer';\n\n          const { mag, place, time }: any = e.features[0].properties;\n          const coordinates = e.features[0].geometry.coordinates!.slice();\n          // Get all data for the tooltip\n\n          const locationHtml = place !== 'null' ? `<p>Location: <b>${place}</b></p>` : '';\n\n            const HTML = `${locationHtml}\n                    <p>Time: <b>${new Date(time).toDateString()} - ${new Date(time).toLocaleTimeString()}</b></p>\n                    <p>Magnitude: <b>${mag}</b></p>`;\n\n          // Ensure that if the map is zoomed out such that multiple\n          // copies of the feature are visible, the popup appears\n          // over the copy being pointed to.\n          while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n          }\n\n          popup\n            .setLngLat(coordinates as LngLatLike)\n            .setHTML(HTML)\n            .addTo(map);\n        }\n      }\n    });\n\n    // Mouse leave event\n    map.on('mouseleave', 'earthquake-layer', () => {\n      // Reset the last Id\n      lastId = null;\n      map.getCanvas().style.cursor = '';\n      popup.remove();\n    });\n  };\n\n\tconst constructMap = () => {\n    // You can store the map instance with useRef too\n    const map = new mapboxgl.Map({\n      container: mapboxElRef.current!,\n      // style: 'mapbox://styles/rukbin011/ckagtrcc110de1ipt2pzqqn5v',\n      style: mapboxStyle,\n      center: [121.76572,  13.01153], // initial geo location for Philippines\n      zoom: 4 // initial zoom\n    });\n\n    // Add navigation controls to the top right of the canvas\n    map.addControl(new mapboxgl.NavigationControl());\n\n    // Call this method when the map is loaded\n    map.once('load', function() {\n      addLayerAndEvents(map);\n    });\n\t};\n\n\tconst [dropdownValue, setDropdownValue] = React.useState<string>('');\n\n\t// Initialize our map\n\tReact.useEffect(() => {\n\t\tif (data.length > 0) {\n      if (mapState) {\n        clearLayer(mapState);\n        addLayerAndEvents(mapState)\n      } else {\n        constructMap();\n      }\n\t\t}\n\t}, [data]);\n\n\tconst buildRange = (start: number): (number | string)[] => {\n\t\tconst range: (number | string)[] = ['in', 'mag'];\n\t\tfor (let i = 0; i < 10; i++) {\n\t\t\tconst value: string = `${start}.${i}`;\n\t\t\trange.push(+value);\n\t\t}\n\t\treturn range;\n\t};\n\n\tconst handleDropdownChange = (event: React.SyntheticEvent<HTMLElement, Event>, dropdownData: DropdownProps) => {\n\t\tconst magnitude: number | null = dropdownData.value ? +dropdownData.value : null;\n\t\tsetDropdownValue(dropdownData.value as string);\n\t\tif (mapState && magnitude) {\n\t\t\t// mapState.setFilter('earthquake-layer', ['>=', ['get', 'mag'], magnitude]);\n\t\t\t// filter in magnitude with range from .0 to .9;\n\t\t\tmapState.setFilter('earthquake-layer', buildRange(magnitude));\n\t\t}\n\t};\n\n\tconst resetFilter = () => {\n\t\t// reset filter\n\t\tif (mapState) {\n\t\t\tsetDropdownValue('');\n\t\t\tmapState.setFilter('earthquake-layer', null);\n\t\t}\n\t};\n\n  React.useEffect(() => {\n    if (dpStartDate) {\n      dispatch({ type: 'setStartDate', payload: {\n        startDate: getDate(dpStartDate)\n      }});\n    }\n  }, [dpStartDate, dpEndDate]);\n\n  const submit = () => {\n    if (startDate && endDate) {\n      let url: string = `${endPoint.byRangeWith}${startDate}/${endDate}`;\n      url = limit ? url.concat(`/${limit}`) : url;\n      fetchData(url);\n    }\n\n    dispatch({ type: 'close' });\n  };\n\n\treturn (\n\t\t<>\n      <Modal\n        size='mini'\n        open={open}\n        onClose={() => dispatch({ type: 'close' })}\n      >\n        <Modal.Header>Search by range</Modal.Header>\n        <Modal.Content>\n          Start Date\n          <DatePicker selected={dpStartDate} onChange={(date: any) => setDpStartDate(date)} />\n          End Date\n          <DatePicker selected={dpEndDate} onChange={(date: any) => setDpEndDate(date)} />\n          Limit\n          <div>\n            <Input value={limit || ''} size='small' type='number' min={0} max={1000} placeholder='0-1000' onChange={(e) => {\n              dispatch({ type: 'setLimit', payload: { limit: e.currentTarget.value} });\n            }} />\n          </div>\n        </Modal.Content>\n        <Modal.Actions>\n          <Button negative onClick={() => dispatch({ type: 'close' })}>\n            Cancel\n          </Button>\n          <Button positive onClick={submit}>\n            Submit\n          </Button>\n        </Modal.Actions>\n      </Modal>\n\t\t\t<div className={style.dropdown}>\n\t\t\t\t<Dropdown\n\t\t\t\t\tonChange={handleDropdownChange}\n\t\t\t\t\tplaceholder='Select Magnitude'\n\t\t\t\t\tfluid\n\t\t\t\t\tsearch\n\t\t\t\t\tselection\n\t\t\t\t\toptions={getMagnitudes()}\n\t\t\t\t\tvalue={dropdownValue}\n\t\t\t\t/>\n\t\t\t</div>\n      <Button onClick={() => dispatch({ type: 'open' })} className={style.search} animated='vertical' primary>\n        <Button.Content hidden>Search</Button.Content>\n        <Button.Content visible>\n          <Icon name='search' />\n        </Button.Content>\n      </Button>\n\t\t\t{dropdownValue !== '' && <div onClick={resetFilter} className={style.repeat}>\n\t\t\t\t<Icon size='big' name='repeat' />\n\t\t\t</div>}\n\t\t\t<div id={style.map}>\n\t\t\t\t<div className={style.mapContainer}>\n\t\t\t\t\t{/* Assigned Mapbox container */}\n\t\t\t\t\t<div className={style.mapBox} ref={mapboxElRef} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t);\n};","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport { App } from './app';\n\nimport 'normalize.css';\nimport './default.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);","import * as React from 'react';\nimport * as style from './style.css';\nimport { Map } from 'app/components';\nimport { Image } from 'semantic-ui-react';\nimport logo from 'app/usgs_logo.png';\n\nexport const App: React.FC = () => {\n\tconst [isLoading, setIsLoading] = React.useState(true);\n\n\tconst mapIsLoaded = () => {\n\t\tsetIsLoading(false);\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{isLoading && <span className={style.loading}>\n\t\t\t\t<div className={style.title}>Monthly Earthquake tracker</div>\t\n\t\t\t\t<div className={style['usgs-logo']}>\n\t\t\t\t\t<Image src={logo} />\n\t\t\t\t</div>\n\t\t\t\t<div className={style.spinner} />\n\t\t\t\t<div className={style.footnote}>\n\t\t\t\t\t<p>Â© 2020, Coded by Kristoffer Robin Canlas</p>\n\t\t\t\t</div>\n\t\t\t</span>}\n\t\t\t<Map mapIsLoaded={mapIsLoaded} />\n\t\t</React.Fragment>\n\t);\n};","export default \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"map\":\"_2KGeP\",\"mapContainer\":\"_3auwv\",\"mapBox\":\"_3IFrC\",\"mapboxgl-popup\":\"_1-CvP\",\"mapboxgl-popup-content\":\"_2nBJ5\",\"cases\":\"X3Bvp\",\"deaths\":\"_33wTd\",\"recovered\":\"_1_qCQ\",\"flag\":\"_2wgLF\",\"repeat\":\"kEmFC\",\"dropdown\":\"_2Cnsv\",\"search\":\"ZLD88\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"_1vK49\",\"footnote\":\"_33dIt\",\"usgs-logo\":\"_1c58g\",\"stats\":\"_368aN\",\"loading\":\"_2-1bp\",\"spinner\":\"_3XlLL\",\"sk-scaleout\":\"_3789V\"};"],"sourceRoot":""}